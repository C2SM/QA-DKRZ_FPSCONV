# QC CHECK Table (path: /yours/QC-DKRZ/tables/project/CORDEX/CORDEX_check-list.conf)

#   Description:
#   Any text following the # char is a comment.
#   Each deteced incident is handled by a directive on its own.
#   Directives are specified by tokens within groups indicated by braces {}.
#
#  Brace Operation:
#  A nested brace inherits the contents of the one it is embedded. The
#  hierarchy of braces is tree-like with unlimited number of parallel
#  branches as well as vertical branching. Thus, the tip of a branch
#  inherits every item from the parent down the crotches to the root.
#  The braces {} of the lowest level may be omitted as well as a comma around braces.
#  Each higher-level branch, i.e. contents of a brace,
#  is a specialisation to its parent. A brace may contain multiple
#  comma-separated items. If the L-value, i.e. the word 'key'
#  in 'key=value', is identical to a lower level one, then the
#  lower one is not inherited. Inheritance of an item may also be inhibited by
#  the macro "D(item). The macro is applied solely to L-values.
#  The hierarchy of braces is eventually expanded into unrelated strings.
#  Example:
#     simple:  given: a,{b,c},{d,e},f
#             result: 'a,f', 'a,b,c,f', 'd,e,a,f'
#  elaborate: given: a,b=1{x=v{D(x),y,b=2}},{u,v},w
#             result: 'a,b=1,w', 'x=v,a,b=1,w', 'y,b=2,a,w', 'u,v,a,b=1,w,'

#   Key words: L1, L2, L3, D, EM, flag, var, V=value, R=record
#   Level:    L1 Notify incidents. Continue unrestricted.
#             L2 Continue checking to the end of the file. Then, lock processing of the current variable.
#             L3 Stop after completion of meta-data checks. Lock processing of current variable.
#             L4 Stop immediately and shutdown the QC session (no locks).
#   Flag:     Must match in the QC.cpp class.
#   Task:     Email notification (EM), discard the check/test (D)
#   Variable: A list of comma-separated acronyms of variables; directive is only applied to the variable(s).
#   Value:    Constraining value, e.g. {flag,D,V=0,var} discards a test for variable var only if value=0
#   Record:   Record(s), i.e. data at a time value, may be excluded from checking. Single records
#             as well as ranges, e.g. 1-12, may be provided.
#             Note: counting of records starts with number one.
#   Default: {L1}, {L2,EM}, {L3,EM}

#   Force unique behaviour (e.g. for testing). Please, unmark the comment #.
#   NOTE_ALWAYS {group1}, {group2}, . . .
# NOTE_ALWAYS {L1}, {10,D}

#   Leading characters permitted for flags (besides a digit).
  PERMITTED_FLAG_BEGIN=R

# Example:
# descriptive text & 32_2,{L1,tas,D},{L2,EM}

# Time/Data (tested at each time value):
Negative time step & R1,L2,EM
Missing time step & R2,L2
Identical time step & R4,L2
Negative/zero time bounds range & R8,L1
Overlapping time bounds ranges & R16,L1
Gap between time bounds ranges & R32,L1
Found a record entirely with filling value & R100,L1
Found a record entirely with constant value & R200,L1,{D,V=0,clivi,mrfso,prsn,rsus,rsds,sftgif,sic,snc,snd,snm,snw,sund}
Failed outlier test: global minimum & R400,D
Failed outlier test: global maximum & R800,D
Undefined standard deviation & R1600,D
Suspecting a replicated record & R3200,L1,{D,rsus,rsds,rsdt,sund},{D,V=0,clivi,mrfso,prsn,sftgif,sic,snc,snd,snm,snw}
Infinite (Inf) or not-a-number (NaN) & R6400,L1

# Directory and Filename Structure (1)
Directory structure does not match global attributes & 10_1,L1
Directory structure lacks global attribute & 10_2,L1
Unregistered GCMModelName & 10_3,L1
Unregistered RCMModelName & 10_4,L1
Unregistered institute & 10_5,L1
Unregistered combination of institute and RCMModelName & 10_6,L1
NetCDF4 classic deflated (compressed) required & 12,L1
Filename not compliant with CORDEX encoding & 15_1,L1
Filename does not match global attributes & 15_2,L1
Variable <name> in filename does not match any variable in the file & 15_3,L1
The variable acronym in the filename is missing a pressure level & 15_4,L1
Pressure level value in the filename is inappropriate & 15_5,L1
Wrong separator in the period in the filename & 16_1,L1
First date in filename and time bounds are misaligned & 16_2,L1
Second date in filename and time bounds are misaligned & 16_3,L1
Period in filename invalid range & 16_4,L1
Period in filename of incorrect format & 16_5,L1
Period in filename cut incorrectly & 16_6,L1
Period in filename aligned incorrectly for a season & 16_7,L1
Time ambiguity in the ensemble of files & 16_8,L2
Unspecific netCDF or time failure & 16_9,L2
A period is required in the filename & 16_10,L1
Ranges of variable time_bnds are not centred arround the time variable & 16_11,L1
Variable time_bnds is missing & 16_12,L1
File with time dependency for frequency=fx & 17,L1

# Required attributes (2)
Auxiliary <name>: missing required attribute <name>.  & 2_1,L1
Auxiliary <name>:attribute <name>: missing required attribute value=<value> & 2_2,L1
Auxiliary <name>:attribute <name>: unmatched required attribute value=<value> & 2_3,L1
Attribute <variable>:coordinates is missing & 2_4,L1
Auxiliary coordinates variable <name> is not included in attribute coordinates & 2_5,L1
Missing required global attribute: <name> & 2_6,L1
Global attribute <name>: missing required value=<value> & 2_7,L1
Global attribute <name>: unmatched required value & 2_8,L1
Global attribute <driving_experiment>: wrong number of items & 2_9,L1
Global attribute <driving_experiment, item=num>: in conflict with attribute <name>. & 2_10,L1
Auxiliary <plev>  for cloud amounts: missing attribute <plev_bnds> & 2_11,L1

# Variables (3)
Variable <name> not found in the standard table & 3_1,L1
Variable <name> has wrong data type & 32_1,L1
Variable <name>:standard_name conflict & 32_2,L1
Variable <name>:long_name conflict & 32_3,L1
Variable <name> has no units attribute & 32_4,L1
Variable <name> has wrong units attribute & 32_5,L1
Variable <name>:cell-method conflict & 32_6,L1
Variable <name> matches only for case-insensitivity & 32_7,L1
Missing variable in sub-temporal file & 33a,L2
New variable in sub-temporal file & 33b,L2
Variable <name>:_FillValue/missing_value does not match required value=1.E20 & 34,L1
If used, then both _FillValue and missing_value have to be defined & 34b,L1
Variable <name>:units not CF compliant & 35a,D
Variable <name>:standard_name not CF compliant & 35b,L1,{D,sftgif,evspsblpot}
Variable <name>:time:units: different or missing period & 36_1,L1
Variable <name>:time:units: different or missing reference date & 36_2,L1
p-level in the filename and the variable name do not match & 37_1,L1

# Dimensions (4)
Conflict for <variable>, <dimension>: output name & 40_1,L1
Conflict for <variable>, <dimension>: standard name & 40_2,L1
Conflict for <variable>, <dimension>: long name & 40_3,L1
Conflict for <variable>, <dimension>: units & 40_4,L1
Conflict for <variable>, <dimension>: size & 40_5,L1
Conflict for <variable>: changed name of a dimension & 40_6,L1
Dimension of size=1 in the list of variable dimensions & 41,L1

# Auxiliaries (5), note: non-target variables
Auxiliary <plev | plev_bnds> for cloud amounts: unmatched required value(s)=<val> & 5_1,L1
Auxiliary <plev_bnds> for cloud amounts: missing & 5_2,L1
Auxiliary <plev> is missing & 5_3,L1
Auxiliary <plev> data value does not match Pa units & 5_4,L1
Height requires units=m & 55_1,L1
Near-surface height must be [0 - 10m] & 5_6,L1,{D,rlut,rsdt,rsut}

# Data (6)
Data set entirely of const value & 6_1,L1
Data set entirely of _FillValue & 6_2,L1
All time values with identical data & 6_3,L1
Time value before the first time-table range & 6_4,L2
Time value after the last time-table range & 6_5,L2
Time value does not match time-table value & 6_6,L2
Too many time values compared to the time-table & 6_7,L2
Suspicion of fractional data range for units [%] & 6_8,L1
Suspicion of percentage data range for units [1] & 6_9,L1
Overlapping time bounds across files & 6_10,L1
Gap between time bounds across files & 6_11,L1
Overlapping time values across files & 6_12,L1
Gap between time values across files & 6_13,L2
Identical time values across files & 6_14,L2
Variable without any data & 6_15, L2

# Tables (7)
No path to tables; faulty config-file entry & 70_,L2
Could not open the CORDEX_archive_design table & 7_2,L3
Could not open the CORDEX_variables_requirement table & 7_3,L3
Could not open GCMModelName.txt & 7_3,L3
Could not open RCMModelName.txt & 7_4,L3
Frequency not found in the CORDEX standard table captions & 7_5,L3
Domain not specified neither in Table 1 or 2 & 7_6,L1
CORDEX domain Table <1|2>: value of Nlon|Nlat does not match & 7_7,L1
? CORDEX domain Table <1|2>: missing auxiliary <rotated_pole> & 75_3,L1
CORDEX domain Table <1|2>: value of N.Pole lon|lat does not match & 7_8,L1
CORDEX domain Table <1|2>: missing data for auxiliary longitude/latitude & 7_9,L1
CORDEX domain Table <1|2>: resolution does not match & 7_10,L1
CORDEX domain Table <1|2>: West|East|South|North boundary does not match & 7_11,L1

# Project Table (8): changes between sub-temporal files
Could not create a project table & 8_1,L3
Could not lock the project table & 8_2,L1
Project table is locked for more than 1/2 hour & 8_3,L3
Auxiliary is missing in sub-temporal file & 8_4,L1
Additional auxiliary <name> in sub-temporal file & 8_5,L1
Auxiliary <name>: new attribute <name> for sub-temporal file & 8_6,L1
Auxiliary <name>: attribute <name> is missing in sub-temporal file & 8_7, L1
Auxiliary <name>: attribute <name>: changed value in sub-temporal file & 8_8,L1

# Miscellaneous (9)
? Indication of a renewal of data & 80,L3,E
Status: apparently in progress & 9_2,D

# generated by the qa-DKRZ script
Found empty directory & M1,L1
Found broken link & M2,L1
Found empty data file & M3,L1
No permission to read NetCDF file & M4,L2
Found ambiguities in the sequence of sub-temporal files & M5,L2
Found invalid filename & M6,L2
Checksum changed, but the creation_date remained the same & M7,L2
Checksum changed, but the tracking_id remained the same & M8,L2
