# Check-list applying to the CF-1.4 Convention
# path: /yours/QC-0.4/tables/SVN_defaults/CF_check-list.conf

#   Description:
#   Any text following the # char is a comment.
#   Each deteced incident is handled by a directive on its own.
#   Directives are specified by tokens within groups indicated by braces {}.
#
#  Brace Operation:
#  A nested brace inherits the contents of the one it is embedded. The
#  hierarchy of braces is tree-like with unlimited number of parallel
#  branches as well as vertical branching. Thus, the tip of a branch
#  inherits every item from the parent down the crotches to the root.
#  The braces {} of the lowest level may be omitted as well as a comma around braces.
#  Each higher-level branch, i.e. contents of a brace,
#  is a specialisation to its parent. A brace may contain multiple
#  comma-separated items. If the L-value, i.e. the word 'key'
#  in 'key=value', is identical to a lower level one, then the
#  lower one is not inherited. Inheritance of an item may also be inhibited by
#  the macro "D(item). The macro is applied solely to L-values.
#  The hierarchy of braces is eventually expanded into unrelated strings.
#  Example:
#     simple:  given: a,{b,c},{d,e},f
#             result: 'a,f', 'a,b,c,f', 'd,e,a,f'
#  elaborate: given: a,b=1{x=v{D(x),y,b=2}},{u,v},w
#             result: 'a,b=1,w', 'x=v,a,b=1,w', 'y,b=2,a,w', 'u,v,a,b=1,w,'

#   Key words: L1, L2, L3, D, EM, flag, var, V=value, R=record
#   Level:    L1 Notify incidents. Continue unrestricted.
#             L2 Continue checking to the end of the file. Then, lock processing of the current variable.
#             L3 Stop after completion of meta-data checks. Lock processing of current variable.
#             L4 Stop immediately and shutdown the QC session (no locks).
#   Flag:     Should match thpse in the check-list.
#   Task:     Email notification (EM), discard the check/test (D)
#   Variable: A list of comma-separated acronyms of variables; directive is only applied to the variable(s).
#   Value:    Constraining value, e.g. {flag,D,V=0,var} discards a test for variable var only if value=0
#   Record:   Record(s), i.e. data at a time value, may be excluded from checking. Single records
#             as well as ranges, e.g. 1-12, may be provided.
#             Note: counting of records starts with number one.
#   Default: {L1}, {L2,EM}, {L3,EM}

#   Force unique behaviour (e.g. for testing). Please, unmark the comment #.
#   NOTE_ALWAYS {group1}, {group2}, . . .
# NOTE_ALWAYS {L1}, {10,D}

#   Leading characters permitted for flags (besides a digit).
  PERMITTED_FLAG_BEGIN=R,CF

# Example:
# descriptive text & CF_44,D             # discard any check in terms of CF-1.4, chapter 4
# descriptive text & CF_44_1,L1,{tas,D}  # annotate finding for chapt. 4_1, except when it is for 'tas'.

# Note that full chapter items remain 'void', but will discard all tests in case of 'D'

Skip all Chapter 1 related annotations, only 'D' will be effective & CF_1,L1

# Chapter 2:
Skip all Chapter 2 related annotations, only 'D' will be effective & CF_2,L1
The extension of the filename should be .nc & CF_21a,L1
Variable should not be type NC_STRING & CF_22a,L1
Attribute should not be type NC_STRING & CF_22b,L1
Naming convention disregarded & CF_23a,L1
Recommendation: avoid multiple case-insensitive variable names & CF_23b,L1
The dimensions of a variable should have different names & CF_24a,L1
Recommendation: the order of dimensions of a variable is T,Z,Y,X & CF_24b,L1
Recommendation: other dimensions than T,Z,Y,X should be on the left & CF_24c,L1
Variable and its attribute=_FillValue should have the same type & CF_251a
Variable and its attribute=valid_min should have the same type & CF_251b
Variable and its attribute=valid_max should have the same type & CF_251c
Variable and its attribute=valid_range should have the same type & CF_251d
Recommendation: _FillValue should not be within a specified valid range & CF_251e
Recommendation: missing_value and _FillValue should have the same value & CF_251f
Recommendation: missing_value is deprecated and should be replaced by _FillValue & CF_251g
Attribute <name> and the associated variable have to be the same type & CF_26a
Attribute <name> has to be STRING type & CF_26b
Attribute <name> has to be NUMERIC type & CF_26c
Missing global attribute Conventions & CF_261a,L1

# Chapter 3:
Skip all Chapter 3 related annotations, only 'D' will be effective & CF_3a,L1
Recommendation: use long_name and/or standard_name for variables & CF_3b,L1
Warning: attribute title and/or history is not global, but per variable & CF_3c,L1
Recommendation: the units level, layer, and sigma_level are deprecated & CF_31a,L1
Attribute=standard_name contains spaces & CF_33a,L1
Attribute=standard_name is not a CF standard name & CF_33b,L1,{D,evspsblpot}
Units associated to standard_name is not CF convertible & CF_33c,L1,{D,evspsblpot}
AMIP code associated to standard_name is not CF compatible & CF_33d,L1
GRIB code associated to standard_name is not CF compatible & CF_33e,L1
Attribute=standard_name with undefined modifier & CF_33f,L1
Too many modifiers for attribute=standard_name & CF_33g,L1
Attribute=standard_name with modifier=number_of_observations requires value=1 & CF_33h,L1
Attribute=ancillary_variable declares a variable, which is not in the file & CF_34a,L1
Type of attribute=flag_values has to be the same as of the variable & CF_35a,L1
Type of attribute=flag_masks has to be the same as of the variable & CF_35b,L1
Different number of attribute=flag_values and flag_meanings & CF_35c,L1
Different number of attribute=flag_maks and flag_meanings & CF_35d,L1
If flag_values present, then flag_meanings should be specified & CF_35e,L1
The values of flag_values should be mutually exclusive & CF_35f,L1
Variable with a flag_masks attribute should be bit field expression compatible & CF_35g,L1
The values of the flag_masks attribute should be non-zero & CF_35h,L1
Recommendation: the boolean AND of each flag_values and flag_masks should equal the flag_values entry & CF_35j

# Chapter 4: Coordinates:
Skip all Chapter 4 related annotations, only 'D' will be effective & CF_4,L1

Attribute units in conflict with standard_name & CF_41a,L1
Axis attribute is optional for the longitude coordinate, but should be X & CF_41b,L1
Axis attribute is optional for the latitude coordinate, but should be Y & CF_41c,L1
Axis attribute is optional for the rotational coordinate, but should be X|Y & CF_41d,L1
Axis attribute conflicts with lacking units attribute & CF_41e,L1

Rotated coordinate lacks units attribute & CF_42f,L1

Vertical:positive should be either Up oder Down & CF_43a,L1

Vertical:units not defined, although attribute positive|axis are present & CF_431a,L1
Vertical:positive not defined, although units is equivalent to metre & CF_431b,L1
Vertical:positive is converse to the direction given in standard_name & CF_431c,L1

CF-1.4 strongly recommends attribute=formula_terms for dimensionless vertical coordinates & CF_432a,L1
Dimensionless vertical coordinates with units of unity value & CF_432b,D
Dimensionless vertical coordinates with units of a physical value & CF_432c,L1
Attribute=formula_terms is misformatted & CF_432d,L1
Variable is suspected to be dimensionless, but no attribute=formula_terms is available & CF_432e,L1

time:units attribute is missing  & CF_44a,L1
time:units is invalid & CF_44b,L1
time:units with invalid date component & CF_44c,L1
time:units with missing reference date & CF_44d,L1
time:units with invalid date component & CF_44e,L1
time:units with invalid time component & CF_44f,L1
time:units with invalid time zone component & CF_44g,L1
Reference time in the year 0 to indicate climatological time is deprecated & CF_44j,L1
Recommendation: units of year of month should be used with caution & CF_44k,L1
This attribute may only be attached to the time coordinate & CF_44l,L1
time:month_lengths is required, because of lacking time:calendar & CF_4411a,L1
time:month_lengths requires 12 values & CF_441b,L1
Recommendation: time:leap_month should not appear unless leap_year is present & CF_441c,L1
time:leap_month requires a value in the range 1-12 & CF_441d
time:leap_month has to be integer scalar & CF_441e,L1
time:leap_year has to be integer scalar & CF_441f,L1

# Chapter 5: Coordinate Systems:
Skip all Chapter 5 related annotations, only 'D' will be effective & CF_5,L1
A coordinate variable should have values & CF_5a,L1
A coordinate variable should have strictly monotonic values & CF_5b,L1
A coordinate variable should not have attribute _FillValue/missing_value & CF_5c,L1
Recommendation: a variable name should not match the name of any of its dimensions & CF_5d,L1
Recommendation: a horizontal variable should have an axis attribute & CF_5e,L1
Attribute axis may only be attached to a coordinate variable & CF_52a,L1
Variable is declared by <var>:coordinates, but the units attribute is not lon|lat & CF_52b,L1
Axis attribute is not X, Y, Z, or T (case insensitive) & CF_52c,L1
Axis attribute is not attached to corresponding coordinate variable & CF_52d,L1
Axis attribute is not allowed for auxiliary coordinate variables & CF_52e,L1
Variable has more than one coordinate variable with identical axis value & CF_52f,L1

Unsupported name in the grid_mapping attribute & CF_56a,L1
Grid_mapping requires supply of coordinates attribute & CF_56b,L1
Map coordinate requires a standard_name & CF_56c,L1
Standard_name defined, but corresponding map coordinate not found & CF_56d,L1
Recommendation: grid mapping variable should have no dimensions & CF_56e,L1
Attribute grid_mapping is lacking & CF_56f,L1

# Chapter 6: checks are included above
Skip all Chapter 6 related annotations, only 'D' will be effective & CF_6,L1
A label is not named in a coordinates attribute" & CF_6a,L1
The leading dimension of a label does not match one of those of the data variable &CF_6b,L1

# Chapter 7: cells
Skip all Chapter 7 related annotations, only 'D' will be effective & CF_7,L1

Bound should share the same set of dimensions as its associated variable & CF_71a,L1
Bounds should have the correct number of vertices & CF_71b,L1
Bounds should have an additional dimensions for vertices & CF_71c,L1
Boundary should be of numeric type & CF_71d,L1
One-dimensional variables require boundaries with dim=2 & CF_71e
Units of variable and boundary do not agree & CF_71f
Standard_name of variable and boundary do not agree & CF_71g
Recommendation: variable looks like bounds/climatology, but was not declared as such & CF_72h,L1
Expected attribute cell_measures, found cell_measure & CF_72a,L1
Attribute cell_measures requires key-word area: or volume: & CF_72b,L1
A variable declared by attribute cell_measures should have units & CF_72c,L1
A measure variable should have units consistent with the measure type & CF_72d,L1
Attribute cell_methods requires blank separated word-list & CF_73a,L1
Attribute cell_methods requires the form <name: method> & CF_73b,L1
Invalid name in attribute cell_methods & CF_73c,L1
Attribute cell_methods contains more than one valid method or an invalid one & CF_73d,L1
Information by attribute cell_methods with unmatched paranthesis &CF_73e,L1
Interval information by attribute cell_methods requires (interval: value units) & CF_73f,L1
Attribute cell_methods is misspelled & CF_73g,L1
Attribute cell_methods requires a string-valued variable with standard_name=area-type & CF_733a,L1
Attribute cell_methods: invalid comment & CF_73j,L1
Attribute cell_methods has key-word=where with invalid area_type & CF_733b,L1
Variable declared by cell_methods key=where contains invalid area_type & CF_733c,L1
Variable declared by cell_methods key=over should not have more than a single string & CF_733d,L1
Attribute cell_methods for climatology has <within|over> with invalid time range & CF_733e,L1
A given dimension name may only occur once in cell_methods & CF_733f,L1
Recommendation: cell_methods with kind of <lat: lon:> should use <area:> instead& CF_733g,L1
Recommendation: cell_methods attribute should be specified & CF_733h,L1
Recommendation: cell_methods attribute should be specified for each spatio-temporal dimension & CF_733i,L1
Recommendation: variable should have bounds or climatology attributes & CF_733j,L1
Climatological variable requires an additional dimension=2 & CF_74a,L1
Attribute climatology should declare a variable with attribute cell_methods & CF_74b,L1
Calendar of the climatology-bounds variable differs from the time-variable one& CF_74d,L1
Units of the climatology-bounds variable differ from the time-variable ones & CF_74e,L1
Attribute climatology may only be attached to a time coordinate variable & CF_74f,L1
Attribute climatology should declare an existing variable & CF_74g,L1
A climatology variable should not have _FillValue or missing_value attributes & CF_74h,L1
A climatology variable should be a numeric type & CF_74i,L1

# Chapter 8: reduction of data size
Skip all Chapter 8 related annotations, only 'D' will be effective & CF_8,L1

Attributes scale_factor and add_offset should be of the same type & CF_81a,L1
Deviation from scale_factor|add_offset: type of variable should be int|short|byte & CF_81b,L1
Deviation from variable type: scale_factor and add_offset should be float|double & CF_81c,L1
Recommendation: if scale_factor and add_offset are float, then the variable should not be int & CF_81d,L1
Variable may be used as index, but attribute=compress is missing & CF_82a
Attribute=compress is specified, but variable cannot be used as index & CF_82b
Attribute=compress should declare only dimensions & CF_83c,L1

