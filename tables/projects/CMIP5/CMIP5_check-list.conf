# QC CHECK Table (path: . . ./QC-DKRZ/tables/project/CMIP5/cmip5_flags.conf)

#   Description:
#   Any text following the # char is a comment.
#   Each deteced incident is handled by a directive on its own.
#   Directives are specified by tokens within groups indicated by braces {}.
#
#  Brace Operation:
#  A nested brace inherits the contents of the one it is embedded. The
#  hierarchy of braces is tree-like with unlimited number of parallel
#  branches as well as vertical branching. Thus, the tip of a branch
#  inherits every item from the parent down the crotches to the root.
#  The braces {} of the lowest level may be omitted as well as a comma around braces.
#  Each higher-level branch, i.e. contents of a brace,
#  is a specialisation to its parent. A brace may contain multiple
#  comma-separated items. If the L-value, i.e. the word 'key'
#  in 'key=value', is identical to a lower level one, then the
#  lower one is not inherited. Inheritance of an item may also be inhibited by
#  the macro "D(item). The macro is applied solely to L-values.
#  The hierarchy of braces is eventually expanded into unrelated strings.
#  Example:
#     simple:  given: a,{b,c},{d,e},f
#             result: 'a,f', 'a,b,c,f', 'd,e,a,f'
#  elaborate: given: a,b=1{x=v{D(x),y,b=2}},{u,v},w
#             result: 'a,b=1,w', 'x=v,a,b=1,w', 'y,b=2,a,w', 'u,v,a,b=1,w,'

#   Key words: L1, L2, L3, D, EM, ST, PT, flag, var, V=value, R=record
#   Level:    L1 Notify incidents. Continue unrestricted.
#             L2 Continue checking to the end of the file. Then, lock processing of the current variable.
#             L3 Stop after completion of meta-data checks. Lock processing of current variable.
#             L4 Stop immediately and shutdown the QC session (no locks).
#   Table:    Standard Output Table (ST), Project Table (PT)
#   Flag:     Must match in the QC.cpp class.
#   Task:     Email notification (EM), discard the check/test (D)
#   Variable: A list of comma-separated acronyms of variables; directive is only applied to the variable(s).
#   Value:    Constraining value, e.g. {flag,D,V=0,var} discards a test for variable var only if value=0
#   Record:   Record(s), i.e. data at a time value, may be excluded from checking. Single records
#             as well as ranges, e.g. 1-12, may be provided.
#             Note: counting of records starts with number one.
#   Default: {ST,L1}, {PT,L2,EM}, {L3,EM}

#   Force unique behaviour (e.g. for testing). Please, unmark the comment #.
#   NOTE_ALWAYS {group1}, {group2}, . . .

# NOTE_ALWAYS {L1}, {10,D}

# Example:
# descriptive text & 32_2,{L1,tas,D,ST},{PT,L2,EM}

# Time/Data (per time value):
Negative time step & R1,L2,EM
Missing time step & R2,L2,EM
Identical time step & R4,L2,EM
Negative/zero time bounds range & R8,L2,EM
Overlapping time bounds ranges & R16,L2,EM
Gap between time bounds ranges & R32,L2,EM
Found a record entirely with filling value & R100,L1
Found a record entirely with constant value & R200,L1,D,V=0,rsus,rsds,sund,snw,snc,snd,snm,clivi}
Failed outlier test: global minimum & R400,D #,L1
Failed outlier test: global maximum & R800,D #,L1
Undefined standard deviation & R1600,L1
Suspecting a replicated record & R3200,D #,L1,{D,rsus,rsds,sund}
Infinite (Inf) or not-a-number (NaN) & R6400,L2,EM

# Directory and Filename Structure:
Variable name in filename does not match any variable in the file. & 45_3,L1
Filename is inconsistent with CMOR encoding. & 46_6,L1
Filename does not match CMIP5 attributes. & 46_7,L1
Filename time-stamp record (1st date). & 95,L1
Filename time-stamp record (2nd date). & 96,L2
Invalid time-stamp format in the filename. & 97,L2

# Required attributes:
Missing NetCDF attribute: parent_experiment_id. & 30_3,L1
Missing NetCDF attribute: parent_experiment_rip. & 30_4,L1
Attribute formula or formula_terms is missing for variable <name>. & 45_4,L1
time:bounds: declares not existing variable time_bnds. & 45_2,L1
Missing NetCDF global attribute: project_id. & 46_1,L1
Missing NetCDF global attribute: physics_version. & 46_2,L1
Missing NetCDF global attribute: initialization_method. & 46_3,L1
Missing NetCDF global attribute: realization. & 46_4,L1
Missing NetCDF global attribute: experiment_id. & 46_5,L1

# Variables:
Variable <name> not found in the standard table. & 44,L1
Variable time has no unit attibute. & 45_1,L3
<variable>:<dimension>: output name. & {47_1,L1,ST},{47_1,L2,PT}
<variable>:<dimension>: standard name. & {47_2,L1,ST},{47_2,L2,PT}
<variable>:<dimension>: long name. & {47_3,L1,ST},{47_3,L2,PT}
<variable>:<dimension>: axis. & {47_4,L1,ST},{47_4,L2,PT}
<variable>:<dimension>: checksum. & {47_5,L1,ST},{47_5,L2,PT}
# Note: Indicates a change in the layering or model grid.
<variable>:<dimension>: units. & {47_7,L1,ST},{47_7,L2,PT}
<variable>:<dimension>: size. & {47_8,L1,ST},{47_8,L2,PT}
time:units: missing key string in the attribute 'PERIOD since'. & 47_9,L2
# Note: PERIOD must always indicate 'days' for CMIP5.
time:units: different reference dates. & 47_10,L1
# Note: L1, because the calculated date may be actually correct.
Variable representation of a dimension: number of bounds do not match those of the table. & {47_11,L1,ST},{47_11,L2,PT}
Variable representation of a dimension: values of bounds do not match those of the table. & {47_12,L1,ST},{47_12,L2,PT}
Variable specified in the coordinate attribute has no units. & {47_13,L1,ST},{47_13,L2,PT}
Variable <name>: units not CF compliant. & 48_1,D
Variable <name> not CF compliant. & 48_2,L1
Missing variable in sub-temporal file. & 60a,L2
New variable in sub-temporal file. & 60b,L2


# Dimensions:
Dimension not found in the standard table. & 48,L2
Corrupt standard table for dimensions: wrong number of columns. & 50,L3
Dimension from the table not found in the file. & 52,L3
<variable>: standard name conflict. & 58_1,L1
<variable>: long name conflict. & 58_2,L1
<variable>: units conflict. & 58_3,L1
# a) no units attribute in the file. Table requires units= or units=1.
# b) no units attribute in the file.
# c) variable in the file has <units>. The table requires <units>.
<variable>: cell_methods conflict. & 58_4,L1
<variable>: type conflict. & 58_5,L1
No variables a(k) or b(k) found for the hybrid sigma pressure coordinate. & 58_6,L1
<variable>: cell_measures conflict. & 58_7,L1
<variable>. incorrect coordinate attribute. & 58_8,L1
<variable>: type check discarded, because not specified in the MIP table. & 58_9,L1
<variable>: name matches only for case-insensitivity. & 58_10,L1

# Auxiliaries (non-target variables):
Project table: fixed variable: time independence check failed. & 56_1,L3
Project table: number of auxiliaries changed. & 56_2,L3
Project table: checksum of levels of grid vlues changed. & 56_3,L3
Project table: dimensions of auxiliary have changed. & 56_4,L1
Missing auxiliary in the file. & 56_5,L1

# Data:
Data set entirely of const value. & 59_1,L1
Data set entirely of _FillValue. & 59_2,L1
All time values with identical data. & 59_3,L1
Time value before the first time-table range. & 72_1,L3
Time value after the last time-table range & 72_2,L3
Time value does not match time-table value. & 72_3,L3
Too many time values compared to the time-table. & 72_4,L3
Empty data section in the file. & 73,L2

# TABLES
Could not open the CMIP5 standard_ouput table. & 41,L3
MIP table not found in the standard table. & 42,L3
Missing column(s) in the standard table. & 43,L3
Invalid MIP table name in CMIP5 attributes. & 46_8,L1
Diverging MIP table name in attribute and filename. & 46_9,L1
Table sheet for dimensions not found in the CMIP5 standard output table. & 49,L3
Corrupt table sheet for dimensions: wrong number of columns. & 50,L3
Table sheet for dimensions: missing value in column 'bounds'. & 51,L1
Project table is permanently locked. & 54_1,L3
Could not create project table. & 54_2,L3
Could not lock project table. & 54_3,L3
Corrupt project table: variable. & 55_1,L3
Corrupt project table: dimension. & 55_2,L3
Corrupt project table: auxiliary. & 55_3,L3
No path to tables found. Check your configuration file, please. & 57,L3

# Miscellaneous
Ambiguity in file ensemble. & 16_8,L2
Unspecific netCDF or time failure. & 16_9,L2
Indication of a renewal of data during QC. & 64,L3
Config-file REDO: faulty argument. & 65,L3
Config-file REDO: although selected the qc_<filename>.nc file is empty. & 66,L3
Config-file REDO: requires at least one time value in qc_<filename>.nc. & 67,L3
Waiting for a closing of a temporal gap. & 68,L3
Any error in any data for any time value. & 70,L2
As 70 but with STOP_AT_TIME_ERRORS enabled. & 71,L3
Ambiguity check failed for sorted dates of sub-temporal files. & 71_1,L1
Modification time check failed for ascending files. & 71_2,L1
Status: apparently in progress. & 82,L1

