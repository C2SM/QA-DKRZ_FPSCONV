getCondaPath()
{
  if [ ${CONDA_PATH} ] ; then
    return
  else
    if . $QA_SRC/scripts/parseConfigFile CONDA_PATH ] ; then
      export CONDA_PATH
      return
    fi

  fi

  # no conda in PATH;
  # was this script launched from qa-dkrz of a conda installation?
  # look for bin/conda in QA_SRC
  local path=$QA_SRC

  local i j pth pc sz
  declare -a pc
  pc=( ${path//\// } )
  sz=$(( ${#pc[*]} -1 ))

  for(( i=0; i < sz ; ++i )) ; do
    j=$((i+1))
    pth="${pth}/${pc[i]}"

    if [ "${pc[i]}" = bin -a "${pc[j]}" = conda ] ; then
        pth="${pth}/bin/conda"
        break
    fi
  done

  if [ ${i} -lt ${sz} ] ; then
     export CONDA_PATH="${pth}"
     . $QA_SRC/scripts/parseConfigFile CONDA_PATH=${CONDA_PATH}
  fi

  # CONDA_PATH could be empty, if conda is neither referenced
  # by PATH nor by alias.

  return
}


# main

getCondaPath

